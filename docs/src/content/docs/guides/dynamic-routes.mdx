---
title: Dynamic Routes
description: Advanced routing with dynamic parameters (Work in Progress)
---
import { Code } from '@astrojs/starlight/components';

## Overview

Dynamic routes allow you to capture URL segments as parameters with type safety. Structure-Ts uses a typed parameter syntax that makes routes explicit and predictable.

:::note[Partial Implementation]
Dynamic routing is currently implemented with typed parameter syntax. Parameter value extraction is under development. The features described on this page show both what's working and what's coming soon.
:::

:::caution[Work in Progress]
Dynamic routing is currently under active development. The features described on this page are being implemented and may change before the final release. Use with caution in production environments.
:::


## Current Status

**What's Working:**
- âœ… Typed parameter syntax (`<id:int>`, `<slug:str>`)
- âœ… Multiple parameters in single route
- âœ… Route matching and registration

**Under Development:**
- ğŸš§ Parameter value extraction in controllers
- ğŸš§ Automatic type conversion (int, str, etc.)
- ğŸš§ Parameter validation

**Not tested yet!**
- Wildcard routes â³

**Planned Features:**
- ğŸ“‹ Optional parameters
- ğŸ“‹ Parameter constraints (min, max, pattern)

## Parameter Syntax

Structure-Ts uses an explicit typed syntax for parameters:

<Code
  code={
    `<parameter_name:type>`
  }
  lang='ts'
  mark={[
    '<parameter_name:type>'
  ]}
/>

**Supported types:**
- `int` - Integer numbers (e.g., 1, 42, 999)
- `str` - Strings (e.g., "hello", "my-slug", "user-123")
- `bool` - Boolean (spacific: true,false) its a nish case
- `*` - Any (e.g., "hello", "my-slug", 123) but it's Returns as String

:::note[Type Bool]
`bool` as type is a nish case
:::

**Examples:**

<Code
  code={
    `<id:int>        // Matches: 1, 42, 999
<slug:str>      // Matches: hello, my-post, about-us
<userId:int>    // Matches: 1, 2, 3
<username:str>  // Matches: john, alice, bob-smith
<is-active:bool>  // Matches: true, false
<any:*>  // Matches: john, alice, 123`
  }
  lang='ts'
  mark={[
    `<id:int>`,`<slug:str>`,`<userId:int>`,`<username:str>`,`<is-active:bool>`,`<any:*>`
  ]}
/>

## Basic Dynamic Parameters

### Single Integer Parameter

**Route definition:**

<Code
  code={
    `import { Router } from 'structure-ts';
import { getUser } from './controllers';

const { routes, route } = Router();

route.get('/<id:int>', getUser);

export default routes;`
  }
  lang='ts'
  title='src/users/routes.ts'
  mark={[
    `<id:int>`
  ]}
/>

**Matches:**

<Code
  code={
    `/1      âœ… Matches (id = 1)
/42     âœ… Matches (id = 42)
/999    âœ… Matches (id = 999)
/abc    âŒ No match (not an integer)
/1.5    âŒ No match (not an integer)`
  }
  lang='sh'
/>

{/* **Controller (when parameter extraction is implemented):** */}

### Single String Parameter

**Route definition:**

<Code
  code={
    `route.get('/<slug:str>', getPost);`
  }
  lang='ts'
  title='src/blog/routes.ts'
  mark={[
    `<slug:str>`
  ]}
/>

**Matches:**

<Code
  code={
    `/hello-world        âœ… Matches (slug = "hello-world")
/my-first-post      âœ… Matches (slug = "my-first-post")
/about              âœ… Matches (slug = "about")
/123                âœ… Matches (slug = "123")`
  }
  lang='sh'
/>

## Multiple Parameters

structure-ts supports multiple parameters in a single route.

### Two Parameters

**Route definition:**

<Code
  code={
    `route.get('/<userId:int>/posts/<postId:int>', getUserPost);`
  }
  lang='ts'
  title='src/post/routes.ts'
  mark={[
    `<userId:int>`,`<postId:int>`
  ]}
/>

**Matches:**

<Code
  code={
    `/1/posts/5        âœ… Matches (userId=1, postId=5)
/42/posts/123     âœ… Matches (userId=42, postId=123)
/1/posts/abc      âŒ No match (postId not int)`
  }
  lang='sh'
/>

### Mixed Parameter Types

**Route definition:**

<Code
  code={
    `route.get('/<year:int>/<month:int>/<slug:str>', getBlogPost);`
  }
  lang='ts'
  title='src/post/routes.ts'
  mark={[
    `<year:int>`,`<month:int>`,
    `<slug:str>`
  ]}
/>

**Matches:**

<Code
  code={
    `/2024/01/my-post        âœ… Matches
/2024/12/hello-world    âœ… Matches
/2024/abc/my-post       âŒ No match (month not int)`
  }
  lang='sh'
/>

## Controller (when parameter extraction is implemented):

<Code
  code={
    `const getBlogPost: ControllerType = async (request, reply) => {
  const { year, month, slug } = request.params;
  // all the params
  
  const post = await Post.findOne({
    where: {
      year,
      month,
      slug,
    },
  });
  
  reply.status(ok()).json({ data: post });
};`
  }
  lang='ts'
  title='src/post/routes.ts'
  mark={[
    `{ year, month, slug }`
  ]}
/>

## Type Safety Benefits

The typed parameter syntax provides several benefits:

### 1. Clear Route Intent

<Code
  code={
    `// others way (ambiguous)
route.get('/:id', getUser);  // Is id a number? String? UUID?

// structure-ts way (explicit)
route.get('/<id:int>', getUser);  // Clearly an integer`
  }
  lang='ts'
  title='src/app/routes.ts'
/>

### 2. Automatic Type Conversion

When parameter extraction is implemented, types will be automatically converted:

<Code
  code={
    `// others way:
const id = parseInt(request.params.id);  // Manual conversion

// No manual parsing needed
const { id } = request.params;  // Already a number!`
  }
  lang='ts'
  title='src/app/routes.ts'
/>


### 3. Route Validation

Routes that don't match the type won't trigger the controller:

<Code
  code={
    `route.get('/<id:int>', getUser);

// /users/abc â†’ 404 (doesn't match route)
// /users/123 â†’ Calls getUser with id=123`
  }
  lang='ts'
  title='src/app/routes.ts'
/>

## Route Order and Specificity

More specific routes should come before general ones:

<Code
  code={
    `// âœ… Correct order
route.get('/featured', getFeaturedPosts);      // Static route first
route.get('/recent', getRecentPosts);           // Static route
route.get('/<slug:str>', getPost);              // Dynamic last

// âŒ Wrong order
route.get('/<slug:str>', getPost);              // Matches everything!
route.get('/featured', getFeaturedPosts);       // Never reached`
  }
  lang='ts'
  title='src/app/routes.ts'
/>

**Rule:** Define routes from most specific to least specific.



## Current Workarounds

Until parameter extraction is fully implemented, here are temporary workarounds:

### Manual Parameter Extraction

<Code
  code={
    `const getUser: ControllerType = (request, reply) => {
  // Temporary: Extract from URL manually
  const urlParts = request.url.split('/');
  const id = parseInt(urlParts[urlParts.length - 1]);
  
  if (isNaN(id)) {
    return reply.status(400).json({
      success: false,
      error: 'Invalid ID',
    });
  }
  
  // Use id...
};`
  }
  lang='ts'
  title='src/app/routes.ts'
/>


## Optional Parameters (Planned)

:::caution[Not Yet Available]
Optional parameters are planned for a future release.
:::

**Planned syntax:**

<Code
  code={
    `route.get('/posts/<id:int>?', listOrGetPost);`
  }
  lang='ts'
  title='src/post/routes.ts'
  mark={[
    `<id:int>?`
  ]}
/>

**Intended behavior:**

<Code
  code={
    `/posts        â†’ List all posts (id is undefined)
/posts/5      â†’ Get post 5 (id = 5)`
  }
  lang='ts'
  title='src/app/routes.ts'
/>



{/* ## Custom Types (Planned)

:::caution[Not Yet Available]
Custom parameter types are on the roadmap.
:::

**Planned syntax:**
```typescript
route.get('/<id:uuid>', getUser);
route.get('/<date:date>', getPostsByDate);
```

**Intended matching:**
```
<id:uuid>   â†’ Matches UUID format only
<date:date> â†’ Matches date format (YYYY-MM-DD)
```
*/}

## Parameter Constraints (Planned)

:::caution[Not Yet Available]
Parameter validation constraints are planned.
:::

**Planned syntax:**

<Code
  code={
    `route.get('/<id:int:min=1:max=9999>', getUser);
route.get('/<slug:str:pattern=[a-z-]+>', getPost);`
  }
  lang='ts'
  title='src/app/routes.ts'
/>

## Wildcard Routes

:::caution[Not Yet Available]
Wildcard routes are not tested yet
:::

**Planned syntax:**

<Code
  code={
    `route.get('/files/<path:path>', serveFile);`
  }
  lang='ts'
  title='src/app/routes.ts'
/>

**Would match:**

<Code
  code={
    `âœ… /files/guide.pdf
âœ… /files/logo.png
âœ… /files/file.txt`
  }
  lang='sh'
/>

## Best Practices

### 1. Use Descriptive Parameter Names

<Code
  code={
    `// âœ… Good - clear what the parameter is
route.get('/<userId:int>/posts/<postId:int>', getPost);

// âŒ Bad - unclear parameter names
route.get('/<a:int>/posts/<b:int>', getPost);`
  }
  lang='ts'
  title='src/app/routes.ts'
  mark={[
    `<userId:int>`,`<postId:int>`
  ]}
/>

### 2. Choose Appropriate Types

<Code
  code={
    `// âœ… Good - use int for numeric IDs
route.get('/<id:int>', getUser);

// âœ… Good - use str for slugs
route.get('/<slug:str>', getPost);

// âŒ Bad - using str for numeric ID
route.get('/<age:str>', getUser);  // Should be int`
  }
  lang='ts'
  title='src/app/routes.ts'
/>
### 3. Keep Routes Simple

<Code
  code={
    `// âœ… Good - reasonable nesting
route.get('/<userId:int>/posts/<postId:int>', getPost);

// âš ï¸ Consider simplifying - too nested
route.get(
  '/<userId:int>/posts/<postId:int>/comments/<commentId:int>/replies/<replyId:int>',
  getReply
);`
  }
  lang='ts'
  title='src/app/routes.ts'
/>

## Complete Example

Here's a complete example using typed dynamic routes:

<Code
  code={
    `// src/blog/routes.ts
import { Router } from 'structure-ts';
import {
  listPosts,
  getPost,
  getPostsByYear,
  getPostsByYearMonth,
  getUserPosts,
} from './controllers';

const { routes, route } = Router();

// Static routes first
route.get('/', listPosts);
route.get('/featured', getFeaturedPosts);

// Dynamic routes (more specific first)
route.get('/<year:int>/<month:int>/<slug:str>', getPostsByYearMonth);
route.get('/<year:int>/<slug:str>', getPostsByYear);
route.get('/user/<userId:int>', getUserPosts);
route.get('/<slug:str>', getPost);

export default routes;`
  }
  lang='ts'
  title='src/app/routes.ts'
/>

<Code
  code={
    `// src/blog/controllers.ts
import { type ControllerType, ok } from 'structure-ts';

export const getPostsByYearMonth: ControllerType = async (request, reply) => {
  // When parameter extraction is implemented:
  const { year, month, slug } = request.params;
  // year: number, month: number, slug: string
  
  const post = await Post.findOne({
    where: { year, month, slug },
  });
  
  reply.status(ok()).json({ data: post });
};`
  }
  lang='ts'
  title='src/app/controllers.ts'
/>

## Development Timeline

### Current 
- âœ… Typed parameter syntax implemented
- âœ… Route matching works
- âœ… Wildcard routes
- ğŸš§ Parameter extraction in development

### Next Release
- ğŸš§ Complete parameter extraction
- ğŸš§ Automatic type conversion
- ğŸš§ Better error messages

### Future Releases
- ğŸ“‹ Optional parameters
- ğŸ“‹ Custom types
- ğŸ“‹ Parameter constraints

## Providing Feedback

We value your input on dynamic routing!

### Report Issues

Found a bug? [Open an issue](https://github.com/rahulroy0322/structure-ts/issues)

Include:
- Route definition
- Expected behavior
- Actual behavior
- Example code

### Request Features

Want a feature? [Start a discussion](https://github.com/rahulroy0322/structure-ts/discussions)

Share:
- Your use case
- Example of desired syntax
- Why it's important

### Stay Updated

- **GitHub**: Watch the repository for updates
- **Changelog**: Check release notes
- **This page**: Updates as features land

## Questions?

Dynamic routing is actively evolving. Have questions?

- **Documentation**: Check back for updates
- **GitHub Issues**: Report problems
- **Discussions**: Ask questions
- **Examples**: See [Examples](/examples/) for working code

Thank you for your patience as we complete this feature!
