---
title: Routing
description: Learn how to define routes and connect URLs to controllers
---
import { Code } from '@astrojs/starlight/components';

Routes connect URLs to your controllers. This guide covers everything you need to know about routing in StratusTS.

## What is Routing?

Routing maps HTTP requests to specific controllers based on:
- **URL path**: `/users`, `/blog/posts`
- **HTTP method**: GET, POST, PATCH, DELETE, etc.

When someone visits your URL, routing decides which code runs.

## Basic Route Setup

Each app has its own `routes.ts` file that defines its routes.

### Minimal Example

<Code
  code={
    `import { Router } from 'stratus-ts';
import { listUsers } from './controllers';

const { routes, route } = Router();

route.get('/', listUsers);

export default routes;`
  }
  lang='ts'
  title={'src/users/routes.ts'}
  mark={[
    'listUsers',
  ]}
/>

**What's happening:**
1. Import `Router` from StratusTS
2. Create a router with `Router()`
3. Define routes using `route.get()`, `route.post()`, etc.
4. Export `routes` as default

## HTTP Methods

StratusTS supports all standard HTTP methods.

### GET - Retrieve Data

<Code
  code={
    `route.get('/', listUsers);
route.get('/<id:int>', getUser);`
  }
  lang='ts'
  title={'src/users/routes.ts'}
  mark={[
    'route.get',
  ]}
/>

**When to use:** Fetching data, displaying pages, reading resources

### POST - Create Data

<Code
  code={
    `route.post('/create', createUser);
route.post('/login', loginUser);`
  }
  lang='ts'
  title={'src/users/routes.ts'}
  mark={[
    'route.post',
  ]}
/>

**When to use:** Creating new resources, submitting forms, uploading data

### PUT - Update Data (Complete)

<Code
  code={
    `route.put('/<id:int>', updateUser);`
  }
  lang='ts'
  title={'src/users/routes.ts'}
  mark={[
    'route.put',
  ]}
/>

**When to use:** Replacing entire resources

### PATCH - Update Data (Partial)

<Code
  code={
    `route.patch('/<id:int>', patchUser);`
  }
  lang='ts'
  title={'src/users/routes.ts'}
  mark={[
    'route.patch'
  ]}
/>

**When to use:** Updating specific fields

### DELETE - Remove Data

<Code
  code={
    `route.delete('/<id:int>', deleteUser);`
  }
  lang='ts'
  title={'src/users/routes.ts'}
  mark={[
    'route.delete'
  ]}
/>

**When to use:** Removing resources

### ALL - Any Method

{/* ! TODO it code plz */}
<Code
  code={
    `route.all('/webhook', handleWebhook); // doesn't support yet trying hard`
  }
  lang='ts'
  title={'src/users/routes.ts'}
  mark={[
    'route.all',
  ]}
/>

**When to use:** Endpoints that accept any HTTP method

## Route Paths

### Root Path

<Code
  code={
    `route.get('/', controller);`
  }
  lang='ts'
  title={'src/users/routes.ts'}
  mark={[
    `'/'`,
  ]}
/>

### Named Paths

<Code
  code={
    `route.get('/profile', getProfile);
route.get('/settings', getSettings);`
  }
  lang='ts'
  title={'src/users/routes.ts'}
  mark={[
    `'/profile'`,
    `'/settings'`
  ]}
/>

Full URLs:
- `/profile`
- `/settings`

### Nested Paths

<Code
  code={
    `route.get('/posts/recent', getRecentPosts);
route.get('/admin/dashboard', getDashboard);`
  }
  lang='ts'
  title={'src/users/routes.ts'}
  mark={[
    `'/posts/recent'`,
    `'/admin/dashboard'`
  ]}
/>

## Dynamic Parameters

:::note[Work in Progress]
Dynamic routing is currently under development. Check the [Plan](/advanced/future-plans/) page for the latest status.
:::

### Basic Parameters

<Code
  code={
    `route.get('/<id:int>', getUser);`
  }
  lang='ts'
  title={'src/users/routes.ts'}
  mark={[
    `'/<id:int>'`
  ]}
/>

Access in controller:

<Code
  code={
    `const getUserController: ControllerType = (request, reply) => {
    const { id } = request.params;
    console.log(\`User ID: \${id}\`);
};`
  }
  lang='ts'
  title={'src/users/routes.ts'}
  mark={[
   `const { id } = request.params;`
  ]}
/>

### Multiple Parameters

<Code
  code={
    `route.get('/<userId:int>/posts/<postId:int>', getPost);`
  }
  lang='ts'
  title={'src/users/routes.ts'}
  mark={[
    `/<userId:int>`,`/<postId:int>'`
  ]}
/>

Access in controller:

<Code
  code={
    `const { userId, postId } = request.params;`
  }
  lang='ts'
  title={'src/users/routes.ts'}
  mark={[
    `const { userId, postId } = request.params;`
  ]}
/>

## Query Parameters

Query parameters appear after `?` in URLs: `/users?page=2&limit=10`

#### Upcomming

{/* ### Accessing Query Parameters

```typescript
const listUsersController: ControllerType = (request, reply) => {
  const { page, limit } = request.query;
  
  const pageNumber = parseInt(page || '1');
  const pageLimit = parseInt(limit || '10');
  
  // Fetch users with pagination
};
``` */}
{/* 
### Example URLs

```
/users?page=1
/users?page=2&limit=20
/users?sort=name&order=asc
/search?q=javascript&category=tutorials
``` */}

### Base URL / Prefix

You can customize the base URL:

<Code
  code={
    `const { routes, route } = Router('/api/v1');

route.get('/users', handler);  // → /api/v1/users`
  }
  lang='ts'
  title={'src/users/routes.ts'}
  mark={[
    `Router('/api/v1');`
  ]}
/>

## Multiple Routes Example

Here's a complete CRUD (Create, Read, Update, Delete) setup:

<Code
  code={
    `import { Router } from 'stratus-ts';
import {
    listUsers,
    getUser,
    createUser,
    updateUser,
    deleteUser,
} from './controllers';

const { routes, route } = Router();

// List all users
route.get('/', listUsers);

// Get single user
route.get('/<id:int>', getUser);

// Create new user
route.post('/create', createUser);

// Update user
route.put('/<id:int>', updateUser);

// Delete user
route.delete('/<id:int>', deleteUser);

export default routes;
`
  }
  lang='ts'
  title={'src/users/routes.ts'}
  mark={[
    `route.get('/<id:int>', getUser);`,
    `route.put('/<id:int>', updateUser);`,
    `route.delete('/<id:int>', deleteUser);`
  ]}
/>

### Resulting Routes

<Code
  code={
`GET    /         → listUsers
GET    /:id      → getUser
POST   /create   → createUser
PUT    /:id      → updateUser
DELETE /:id      → deleteUser`
  }
  lang='sh'
  title={'Users Route Summary'}
/>

## RESTful Routing

Follow REST conventions for clean, predictable APIs.

### Standard REST Routes

<Code
  code={
`// Collection routes
route.get('/', listResources);          // GET /users
route.post('/', createResource);        // POST /users

// Member routes
route.get('/<id:int>', getResource);         // GET /users/:id
route.put('/<id:int>', updateResource);      // PUT /users/:id
route.patch('/<id:int>', patchResource);     // PATCH /users/:id
route.delete('/<id:int>', deleteResource);   // DELETE /users/:id`
  }
  lang='ts'
  title='src/users/routes.ts'
/>

### Nested Resources

<Code
  code={
`// Posts belong to users
route.get('/<userId:int>/posts', getUserPosts);
route.post('/<userId:int>/posts', createUserPost);
route.get('/<userId:int>/posts/<postId:int>', getUserPost);`
  }
  lang='ts'
  title='src/users/routes.ts'
  mark={[
    `route.get('/<userId:int>/posts', getUserPosts);`,
    `route.post('/<userId:int>/posts', createUserPost);`,
    `route.get('/<userId:int>/posts/<postId:int>', getUserPost);`,
  ]}
/>

URLs become:
- `/1/posts` - Get all posts by user 1
- `/1/posts/5` - Get post 5 by user 1

## Route Organization

### Keep Routes Logical

Group related functionality:

<Code
  code={
`// User routes
route.get('/', listUsers);
route.get('/<id:int>', getUser);
route.post('/create', createUser);

// Authentication routes
route.post('/login', loginUser);
route.post('/logout', logoutUser);
route.post('/register', registerUser);

// Profile routes
route.get('/profile', getProfile);
route.patch('/profile', updateProfile);`
  }
  lang='ts'
  title='src/users/routes.ts'
/>

## Route Order Matters

Routes are matched in the order they're defined.

### Specific Before Generic

<Code
  code={
    `// ✅ Correct order
route.get('/profile', getMyProfile);      // Matches /profile
route.get('/<id:int>', getUser);          // Matches /123

// ❌ Wrong order
route.get('/<id:int>', getUser);          // Matches /profile too!
route.get('/profile', getMyProfile);      // Never reached
`}
  lang='ts'
  title='users/routes.ts'
  mark={[
    `'/profile'`,
    `'/<id:int>'`,
  ]}
/>

**Rule:** Define specific routes before dynamic routes.

### Static Before Dynamic

<Code
  code={`// Good
route.get('/search', searchUsers);
route.get('/new', newUserForm);
route.get('/<id:str>', getUser);

// Bad
route.get('/<id:str>', getUser);          // Catches '/search' and '/new'
route.get('/search', searchUsers);        // Never reached
route.get('/new', newUserForm);           // Never reached
`}
  lang='ts'
  title='app/routes.ts'
  mark={[
    `'/search'`,
    `'/new'`,
    `'/<id:str>'`,
  ]}
/>

## Testing Routes

### Using curl

<Code
  code={`# GET request
curl http://localhost:2000/users

# POST request with JSON data
curl -X POST http://localhost:2000/users/create \\
  -H 'Content-Type: application/json' \\
  -d '{"name":"Alice","email":"alice@example.com"}'

# GET with parameters
curl http://localhost:2000/users/1

# DELETE request
curl -X DELETE http://localhost:2000/users/1
`}
  lang='sh'
  title='terminal'
/>

### Using Browser

Visit in your browser for GET requests:

<Code
  code={`http://localhost:2000/users
http://localhost:2000/users/1
http://localhost:2000/users?page=2
`}
  lang='sh'
  title='endpoints'
/>

### Using Postman/Insomnia

1. Set HTTP method (GET, POST, etc.)
2. Enter URL: `http://localhost:2000/users`
3. Add body for POST/PUT requests
4. Click Send

## Common Patterns

### Pattern 1: API Endpoints

<Code
  code={`const { routes, route } = Router('/api');

route.get('/users', listUsers);
route.get('/posts', listPosts);
route.get('/comments', listComments);

// URLs: /api/users, /api/posts, /api/comments
`}
  lang='ts'
  title='src/api/routes.ts'
  mark={[`Router('/api')`, '/users', '/posts', '/comments']}
/>

### Pattern 2: Versioned API

<Code
  code={`// api/routes.ts
  const { routes, route } = Router('/api/v1');
route.get('/users', listUsers);

// api-v2/routes.ts
const { routes, route } = Router('/api/v2');
route.get('/users', listUsers);
`}
  lang='ts'
  title='src/{api,api-v2}/routes.ts'
  mark={[
    `Router('/api/v1')`,
    `Router('/api/v2')`
  ]}
/>

### Pattern 3: Admin Routes

#### Although planed for default admin panel
{/* ! TODO */}
<Code
  code={`// In admin app
const { routes, route } = Router('/admin');

route.get('/dashboard', adminDashboard);
route.get('/users', adminListUsers);
route.delete('/users/<id:int>', adminDeleteUser);

// URLs: /admin/dashboard, /admin/users, etc.
`}
  lang='ts'
  title='src/admin/routes.ts'
  mark={[
    `route.get('/dashboard', adminDashboard)`,
    `route.get('/users', adminListUsers)`,
    `route.delete('/users/<id:int>', adminDeleteUser)`
  ]}
/>

## Debugging Routes

### List All Routes

Add a debug route to see all registered routes:

<Code
  code={`// In admin app
const { routes, route } = Router();

route.get('/dashboard', dashboard);
route.get('/users', users);
route.delete('/users/<id:int>', user);

console.log(routes);
`}
  lang='ts'
  title='src/admin/routes.ts'
  mark={[
    'console.log(routes);'
  ]}
/>

### Console Logging

Add logging to understand route matching:
#### Upcomming

{/* ```typescript
const controller: ControllerType = (request, reply) => {
  console.log('Method:', request.method);
  console.log('URL:', request.url);
  console.log('Params:', request.params);
  console.log('Query:', request.query);
  
  // Your logic...
};
``` */}

## Best Practices

### 1. Use RESTful Conventions

Follow standard REST patterns for predictable APIs:

<Code
  code={`// ✅ Good - RESTful
route.get('/', listUsers);
route.post('/', createUser);
route.get('/<id:int>', getUser);
route.put('/<id:int>', updateUser);
route.delete('/<id:int>', deleteUser);

// ❌ Bad - non-standard
route.get('/getAllUsers', listUsers);
route.get('/createNewUser', createUser);
`}
  lang='ts'
  title='src/users/routes.ts'
  mark={[
    `route.get('/getAllUsers', listUsers);`,
    `route.get('/createNewUser', createUser);`
  ]}
/>

### 2. Keep URLs Simple

<Code
  code={`// ✅ Good
route.get('/posts', listPosts);
route.get('/posts/<id:int>', getPost);

// ❌ Bad
route.get('/get-all-posts-from-database', listPosts);
route.get('/retrieve-single-post-by-id/<id:int>', getPost);`
  }
  lang='ts'
  title='src/blog/routes.ts'
  mark={[
    `route.get('/get-all-posts-from-database', listPosts);`,
    `route.get('/retrieve-single-post-by-id/<id:int>', getPost);`

  ]}
/>

### 3. Use Nouns, Not Verbs

<Code
  code={`// ✅ Good - nouns
route.get('/users', listUsers);
route.post('/users', createUser);

// ❌ Bad - verbs
route.get('/getUsers', listUsers);
route.post('/createUser', createUser);`
  }
  lang='ts'
  title='src/users/routes.ts'
  mark={[
    `route.get('/getUsers', listUsers);`,
    `route.post('/createUser', createUser);`
  ]}
/>

### 4. Be Consistent

<Code
  code={`// ✅ Good - consistent
route.get('/users', listUsers);
route.get('/posts', listPosts);
route.get('/comments', listComments);

// ❌ Bad - inconsistent
route.get('/users', listUsers);
route.get('/all-posts', listPosts);
route.get('/comment-list', listComments);`
  }
  lang='ts'
  title='src/routes-consistency.ts'
  mark={[
    `route.get('/users', listUsers);`,
    `route.get('/all-posts', listPosts);`,
    `route.get('/comment-list', listComments);`,
  ]}
/>

### 5. Version Your API

For public APIs, use versioning:

<Code
  code={
    `const { routes, route } = Router('/api/v1');`
  }
  lang='ts'
  title='src/routes-consistency.ts'
  mark={[
    `'/api/v1'`,
  ]}
/>

This allows changes without breaking existing clients.

## Troubleshooting

### Route Returns 404

**Check:**
1. App is in `APPS` array in settings
2. Route is defined in `routes.ts`
3. Server was restarted after changes
4. URL matches exactly (check spelling, case)

### Wrong Controller Executes

**Check:**
1. Route order (specific routes before generic)
2. Multiple apps don't define same route
3. App order in `APPS` array

### Parameters Not Working

**Check:**
1. Using `:` prefix: `/<id:int>` not `/id`
2. Accessing with `request.params.id`
3. Dynamic routing is enabled (see [Dynamic Routes](/advanced/dynamic-routes/))

## Next Steps

Now that you understand routing:

- **[Models](/guides/models/)** - Connect routes to databases
- **[Dynamic Routes](/guides/dynamic-routes/)** - Let's see Dynamic Routes