---
title: Creating Apps
description: Learn how to create and organize modular applications
---
import { Code, FileTree } from '@astrojs/starlight/components';

Apps are the building blocks of StratusTS applications. This guide explains what apps are, how to create them, and best practices for organizing your code.

## What is an App?

An **app** in StratusTS is a self-contained module that handles a specific domain or feature of your application. Think of apps as reusable packages of functionality.

### Examples of Apps

**Good app examples:**
- `users` - User authentication and management
- `blog` - Blog posts and comments
- `api` - External API endpoints
- `admin` - Admin panel functionality
- `payments` - Payment processing
- `notifications` - Email and push notifications

Each app focuses on one responsibility, making your code easier to understand, test, and maintain.

## Why Use Apps?

### 1. Organization
Apps keep related code together:
<FileTree>
- users/
  - controllers.ts    # User-related request handlers
  - routes.ts         # User-related URLs
  - models.ts         # User database models
  - services.ts       #  Services related to User models
</FileTree>

Everything about users lives in one place.

### 2. Reusability
Apps can be moved between projects:

<Code
  code={
`# Copy entire app to another project
cp -r users/ ../other-project/src/users/`
  }
  lang='sh'
  title={'terminal'}
/>

Share common functionality across projects without code duplication.

### 3. Scalability
Add features without touching existing code:

<Code
  code={
`// Before
const APPS = ['users', 'blog'];

// After - just add new app
const APPS = ['users', 'blog', 'payments', 'notifications'];`
  }
  lang='ts'
  title={'src/settings.ts'}
  mark={[
    `'payments'`,
    `'notifications'`
  ]}
/>

Each app is independent—adding one doesn't break others.

### 4. Team Collaboration
Different developers can work on different apps without conflicts:

- **Alice** works on `users` app
- **Bob** works on `blog` app
- **Charlie** works on `api` app

No stepping on each other's toes!

### 5. Testing
Test apps independently:

<Code 
  code={
    `import { test } from 'node:test';
import { listUsers } from '../controllers';

// Test user functionality in isolation
test('listUsers returns all users', () => {
    // ...
});`
  }
  lang="ts"
  title={'tests/controllers.ts'}
/>

## Creating an App

### Using the CLI

The easiest way to create an app is with the CLI:

<Code 
  code={
    `st create app users`
  }
  lang="sh"
  title={'terminal'}
/>

or the full command:

<Code 
  code={
    `stratus-ts create app users`
  }
  lang="sh"
  title={'terminal'}
/>

This creates a new directory with the standard structure.

### Where to Run the Command

Run this command from your **project root directory** (where `src/` folder exists):

<Code 
  code={
    `my-first-app/
├── src/              # You should be here
│   └── settings.ts
└── package.json

# Run from here:
$ pwd
/path/to/my-first-app

$ st create app users`
  }
  lang="sh"
  title={'terminal'}
/>

### What Gets Created

The CLI generates this structure:

<FileTree>
- src/
  - users/
    - controllers.ts    # Request handlers
    - routes.ts         # URL routing
    - models.ts         # Database models (optional)
    - services.ts       # If **`models.ts`** is presend then required
</FileTree>

### Generated Files

**`controllers.ts`** - Empty file ready for your controllers:

<Code 
  code={
    `import { type ControllerType } from 'stratus-ts';

// Add your controllers here`
  }
  lang="ts"
  title={'app/controllers.ts'}
/>

**`routes.ts`** - Basic router setup:

<Code 
  code={
    `import { Router } from 'stratus-ts';

const { routes, route } = Router();

// Define your routes here
// Example: route.get('/', yourController);

export default routes;
`
  }
  lang="ts"
  title={'app/routes.ts'}
/>

**`models.ts`** - Empty file for database models:

<Code 
  code={
    `// Define your database models here`
  }
  lang="ts"
  title={'app/models.ts'}
/>

## Linking Your App to the Project

Creating an app isn't enough—you must register it in settings.

### Step 1: Open Settings

Edit `src/settings.ts`:

<Code 
  code={
    `import type { DatabaseType, SettingsType } from 'stratus-ts';

const PORT = 2000;
const APPS = [];  // ← Currently empty
const DATABASE: DatabaseType = false;
const TEMPLATE_DIR = 'templates';

export default {
    PORT,
    APPS,
    DATABASE,
    TEMPLATE_DIR,
} satisfies SettingsType;
`
  }
  lang="ts"
  title={'src/settings.ts'}
/>

### Step 2: Add Your App

Add the app name to the `APPS` array:

<Code 
  code={
    `const APPS = ['users'];  // ← Added!`
  }
  lang="ts"
  title={'src/settings.ts'}
  mark={`'users'`}
/>

Full example:

<Code 
  code={
    `import type { DatabaseType, SettingsType } from 'stratus-ts';

const PORT = 2000;
const APPS = ['users'];  // Your app is now registered
const DATABASE: DatabaseType = false;
const TEMPLATE_DIR = 'templates';

export default {
    PORT,
    APPS,
    DATABASE,
    TEMPLATE_DIR,
} satisfies SettingsType;
`
  }
  lang="ts"
  title={'src/settings.ts'}
  mark={[`'users'`]}
/>

### Step 3: Restart Your Server ?

If your server is running and doesn't load new app, restart it to load the new app:


<Code 
  code={
    `# Stop the server (Ctrl+C)
# Start it again
npm run dev
`
  }
  lang="sh"
  title={'terminal'}
/>

Your app's routes are now active!

## How Automatic Route Registration Works

StratusTs automatically registers routes from all apps in the `APPS` array. Here's how:

### 1. Framework Scans Apps

When your server starts, StratusTS:
1. Reads the `APPS` array from settings
2. Looks for each app directory in `src/`
3. Imports `routes.ts` from each app
4. Registers all routes automatically

### 2. Combine URL

Combine all the routes in one place:

<Code
  code={
    `// App name: users
// Route defined as: route.get('/', controller)
// Actual URL: /

// App name: blog
// Route defined as: route.get('/posts', controller)
// Actual URL: /posts
`
  }
  lang="ts"
  mark={[
    "App name: users",
    "App name: blog",
  ]}
/>

### 3. Route Examples

<Code
  code={
    `// users/routes.ts
import { route } from 'stratus-ts';

route.get('/', listUsers);          // → /
route.get('/<id:str>', getUser);    // → /:id
route.post('/create', createUser);  // → /create

// blog/routes.ts
route.get('/blog', listPosts);          // → /blog/
route.get('/blog/<slug:str>', getPost);  // → /blog/:slug
`
  }
  lang="ts"
  title={'src/apps/users/routes.ts & src/apps/blog/routes.ts'}
/>

## Creating Multiple Apps

You can create as many apps as needed:

<Code
  code={
    `st create app users
st create app blog
st create app api
st create app admin
`
  }
  lang="sh"
  title={'terminal'}
  mark={[
    'users',
    'blog',
    'api',
    'admin'
  ]}
/>

Register all of them in settings:

<Code
  code={
    `const APPS = [
    'users',
    'blog',
    'api',
    'admin',
];`
  }
  lang="ts"
  title={'src/settings.ts'}
  mark={[
    "'users'",
    "'blog'",
    "'api'",
    "'admin'"
  ]}
/>

## App Naming Conventions

### Good Names

✅ **Lowercase, no special characters:**

<Code
  code={
    `st create app users
st create app blog
st create app api
`
  }
  lang="sh"
  title={'terminal'}
  mark={[
    'users',
    'blog',
    'api'
  ]}
/>


✅ **Use hyphens for multi-word apps:**

<Code
  code={
    `st create app user-management
st create app blog-posts
st create app payment-gateway
`
  }
  lang="sh"
  title={'terminal'}
  mark={[
    'user-management',
    'blog-posts',
    'payment-gateway'
  ]}
/>

### Bad Names

❌ **Uppercase letters:**

<Code
  code={
    `st create app Users      # Don't do this
st create app BlogPosts  # Don't do this
`
  }
  lang="sh"
  title={'terminal'}
  mark={[
    'Users',
    'BlogPosts'
  ]}
/>

❌ **Spaces or special characters:**

<Code
  code={
    `st create app "user management"  # Don't do this
st create app blog_posts         # Use hyphens instead
`
  }
  lang="sh"
  title={'terminal'}
  mark={[
    '"user management"',
    'blog_posts'
  ]}
/>


## Best Practices

### 1. Keep Apps Focused

Each app should have one clear purpose.

**Good:**

<Code
  code={
    `const APPS = [
    'users',       // User management only
    'blog',        // Blog functionality only
    'payments',    // Payment processing only
];`
  }
  lang="ts"
  title={'src/settings.ts'}
  mark={[
    "'users'",
    "'blog'",
    "'payments'"
  ]}
/>

**Bad:**

<Code
  code={
    `const APPS = [
    'everything',  // Users, blog, payments all mixed together
];`
  }
  lang="ts"
  title={'src/settings.ts'}
  mark={[
    `'everything'`,
  ]}
/>

### 2. Make Apps Independent

Apps should work without depending on each other's internals.

**Good:**

<Code
  code={
`// users/controllers.ts
import { User } from './models';  // Import from own app

// blog/controllers.ts
import { Post } from './models';  // Import from own app`
  }
  lang="ts"
  mark={[
    "import { User }",
    "import { Post }"
  ]}
/>


**Acceptable:**

<Code
  code={
`// If you need user data, import the public API
import { getUserById } from '../users/services';`
  }
  lang="ts"
  title={'blog/controllers.ts'}
  mark={[
    "getUserById",
    "../users/services"
  ]}
/>

**Bad:**

<Code
  code={
    `import { User } from '../users/models';  // Tight coupling`
  }
  lang="ts"
  title={'blog/controllers.ts'}
  mark={[
    "User",
    "../users/models"
  ]}
/>

### 3. Use Clear, Descriptive Names

App names should instantly convey their purpose.

**Good:**
- `users` - Obvious
- `blog` - Clear
- `notifications` - Self-explanatory

**Less Good:**
- `stuff` - Too vague
- `misc` - What does it do?
- `utils` - Utility functions don't need an app

### 4. Group Related Features

If features are closely related, keep them in one app.

**Good:**

<FileTree>
- blog/
  - controllers.ts
    - listPosts()
    - createPost()
    - listComments()
    - createComment()
  - models.ts
    - Post
    - Comment
</FileTree>

Posts and comments are related—they belong together.

**Debatable:**

<FileTree>
- blog-posts/        # Separate app for posts...
- blog-comments/     # ...and comments
</FileTree>

Only separate if they're truly independent features.

### 5. Don't Over-Engineer

Start simple. One app is fine for small projects.

**For small projects:**

<Code
  code={
    `const APPS = ['api'];  // Everything in one app is OK`
  }
  lang="ts"
  title={'src/settings.ts'}
  mark={[
    `'api'`
  ]}
/>

**As you grow:**

<Code
  code={
    `const APPS = ['users', 'blog', 'api'];`
  }
  lang="ts"
  title={'src/settings.ts'}
  mark={[
    `'users', 'blog', 'api'`
  ]}
/>

Split apps when complexity demands it, not before.

## Common Patterns

### Pattern 1: Feature-Based Apps

Organize by feature/domain:

<Code
  code={
`const APPS = [
    'users',        // User authentication
    'blog',         // Blog posts
    'shop',         // E-commerce
    'admin',        // Admin panel
];`
  }
  lang='ts'
  title={'src/settings.ts'}
  mark={[
    `'users'`,
    `'blog'`,
    `'shop'`,
    `'admin'`
  ]}
/>

**When to use:** Most applications benefit from this approach.

### Pattern 2: API Versioning

Separate apps for API versions:

<Code
  code={
`const APPS = [
    'api-v1',       // Version 1 endpoints
    'api-v2',       // Version 2 endpoints
];`
  }
  lang='ts'
  title={'src/settings.ts'}
  mark={[
    'api-v1',
    'api-v2'
  ]}
/>

**When to use:** When maintaining multiple API versions.

### Pattern 3: Client Separation

Different apps for different clients:

<Code
  code={
`const APPS = [
    'web',          // Web application routes
    'mobile-api',   // Mobile app API
    'admin',        // Admin panel
];`
  }
  lang='ts'
  title={'src/settings.ts'}
  mark={[
    `'web'`,
    `'mobile-api'`,
    `'admin'`
  ]}
/>

**When to use:** When different clients need different functionality.

## Example: Building a Blog

Let's walk through creating a complete blog app.

### Step 1: Create the App

<Code
  code={
    `st create app blog`
  }
  lang='sh'
  title={'terminal'}
  mark={['blog']}
/>

### Step 2: Register the App

<Code
  code={
    `const APPS = ['blog'];`
  }
  lang='ts'
  title={'src/settings.ts'}
  mark={['blog']}
/>

### Step 3: Create Controllers

<Code
  code={
    `import { type ControllerType, ok, created, notFound } from 'stratus-ts';

const posts = [
    { id: 1, title: 'First Post', author: 'Alice' },
    { id: 2, title: 'Second Post', author: 'Bob' },
];

// List all posts
export const listPosts: ControllerType = (question, reply) => {
    reply.status(ok()).json({ success: true, data: posts });
};

// Get single post
export const getPost: ControllerType = (question, reply) => {
    const { id } = question.params;
      
    const post = posts.find(p => p.id === parseInt(id));
    
    if (!post) {
      return reply.status(notFound()).json({
        success: false,
        error: 'Post not found',
      });
    }
    
    reply.status(ok()).json({ success: true, data: post });
};

// Create post
export const createPost: ControllerType = (question, reply) => {
    const { title, content, author } = question.body;
    
    const newPost = {
      id: Date.now(),
      title,
      content,
      author,
      createdAt: new Date(),
    };

    posts.push(newPost);
    
    reply.status(created()).json({ success: true, data: newPost });
};`
  }
  lang='ts'
  title={'src/blog/controllers.ts'}
  mark={[
    'listPosts',
    'getPost',
    'createPost'
  ]}
/>

### Step 4: Define Routes

<Code
  code={
    `import { Router } from 'stratus-ts';
import { listPosts, getPost, createPost } from './controllers';

const { routes, route } = Router();

route.get('/', listPosts);
route.get('/<id:int>', getPost);
route.post('/create', createPost);

export default routes;`
  }
  lang='ts'
  title={'src/blog/routes.ts'}
  mark={[
    "route.get('/')",
    "route.get('/<id:int>')",
    "route.post('/create')"
  ]}
/>

### Step 5: Test Your Blog

<Code
  code={
`# Start server
npm run dev

# Test endpoints
curl http://localhost:2000/
curl http://localhost:2000/1
curl -X POST http://localhost:2000/create \\
  -H 'Content-Type: application/json' \\
  -d '{"title":"New Post","content":"Content","author":"Charlie"}'`
  }
  lang='sh'
  title={'terminal'}
  mark={[
    'npm run dev',
    'curl http://localhost:2000/',
    'curl http://localhost:2000/1',
    'curl -X POST http://localhost:2000/create'
  ]}
/>

Your blog app is complete!

## Troubleshooting

### App Not Loading

**Problem:** Routes return 404.

**Solution:** Check that:
1. App is added to `APPS` array in settings
2. App name matches directory name exactly
3. `routes.ts` exports `default`
4. Server was restarted after adding app

### Routes Conflict

**Problem:** One route overrides another.

**Solution:** Check app order in `APPS` array. The first app wins conflicts.

### Import Errors

**Problem:** Cannot import from app.

**Solution:** Use correct relative paths:

<Code
  code={
`import { controller } from './controllers';  // Same directory
import { User } from './models';             // Same directory`
  }
  lang='ts'
  title={'users/{file name}.ts'}
  mark={[
    './controllers',
    './models'
  ]}
/>

## Next Steps

Now that you understand apps, explore:

- **[Controllers](/guides/controllers/)** - Build request handlers
